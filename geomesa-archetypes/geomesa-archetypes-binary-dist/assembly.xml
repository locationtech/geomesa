<?xml version="1.0" encoding="UTF-8"?>
<component xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/component/1.1.2"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/component/1.1.2 http://maven.apache.org/xsd/component-1.1.2.xsd">
  <dependencySets>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <useProjectArtifact>false</useProjectArtifact>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <useTransitiveFiltering>false</useTransitiveFiltering> <!-- transitive filtering applies to excludes too so disable it -->
      <excludes>
        <exclude>org.locationtech.geomesa:geomesa-${tools.module}-gs-plugin*</exclude>
        <exclude>org.locationtech.geomesa:geomesa-${tools.module}-distributed-runtime*</exclude>
        <exclude>org.locationtech.geomesa:geomesa-${tools.module}-spark*</exclude>
        <exclude>org.locationtech.geomesa:geomesa-spark*</exclude>
        <exclude>org.locationtech.geomesa:geomesa-process-wps*</exclude>
        <exclude>com.google.guava:guava</exclude>
      </excludes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>dist/spark</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <useProjectArtifact>false</useProjectArtifact>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <includes>
        <include>org.locationtech.geomesa:geomesa-${tools.module}-spark*</include>
        <include>org.locationtech.geomesa:geomesa-spark*</include>
        <include>org.locationtech.geomesa:geomesa_pyspark*</include>
      </includes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>dist/converters</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <useProjectArtifact>false</useProjectArtifact>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <useStrictFiltering>true</useStrictFiltering>
      <includes>
        <include>org.locationtech.geomesa:geomesa-tools*:jar:data</include>
      </includes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>dist/${tools.module}</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <useProjectArtifact>false</useProjectArtifact>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <includes>
        <include>org.locationtech.geomesa:geomesa-${tools.module}-distributed-runtime*</include>
      </includes>
    </dependencySet>
  </dependencySets>

  <fileSets>
    <fileSet>
      <directory>../../</directory>
      <fileMode>0644</fileMode>
      <includes>
        <include>LICENSE.txt</include>
        <include>README.md</include>
      </includes>
    </fileSet>

    <!-- gs-plugin - have to specify as a file since it's not attached -->
    <fileSet>
      <directory>../geomesa-${tools.module}-gs-plugin/target</directory>
      <outputDirectory>dist/gs-plugins</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0755</fileMode>
      <includes>
        <include>*-install.tar.gz</include>
      </includes>
    </fileSet>

    <!-- module specific filesets -->
    <fileSet>
      <directory>../geomesa-${tools.module}-tools/bin</directory>
      <outputDirectory>bin</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0755</fileMode>
      <filtered>true</filtered>
    </fileSet>
    <fileSet>
      <directory>../geomesa-${tools.module}-tools/conf</directory>
      <outputDirectory>conf</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0644</fileMode>
      <filtered>false</filtered>
    </fileSet>
    <fileSet>
      <directory>../geomesa-${tools.module}-tools/conf-filtered</directory>
      <outputDirectory>conf</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0644</fileMode>
      <filtered>true</filtered>
    </fileSet>

    <!-- common tools filesets -->
    <fileSet>
      <directory>../../geomesa-tools/bin</directory>
      <outputDirectory>bin</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0755</fileMode>
      <filtered>true</filtered>
      <excludes>
        <exclude>geomesa-tools</exclude>
        <exclude>ng</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>../../geomesa-tools/conf</directory>
      <outputDirectory>conf</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0644</fileMode>
      <filtered>false</filtered>
    </fileSet>
    <fileSet>
      <directory>../../geomesa-tools/conf-filtered</directory>
      <outputDirectory>conf</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0644</fileMode>
      <filtered>true</filtered>
    </fileSet>
    <fileSet>
      <directory>../../geomesa-tools/examples</directory>
      <outputDirectory>examples</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0644</fileMode>
      <filtered>false</filtered>
    </fileSet>
    <fileSet>
      <directory>../../geomesa-tools/examples</directory>
      <outputDirectory>conf/sfts/examples</outputDirectory>
      <directoryMode>755</directoryMode>
      <fileMode>0644</fileMode>
      <filtered>false</filtered>
      <includes>
        <include>**/application.conf</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>./</directory>
      <outputDirectory>logs</outputDirectory>
      <directoryMode>0700</directoryMode>
      <excludes>
        <exclude>*/**</exclude>
      </excludes>
    </fileSet>
  </fileSets>

  <files>
    <!-- main script -->
    <file>
      <source>../../geomesa-tools/bin/geomesa-tools</source>
      <destName>geomesa-${tools.module}</destName>
      <outputDirectory>bin</outputDirectory>
      <fileMode>0755</fileMode>
      <filtered>true</filtered>
    </file>
    <!-- nailgun client -->
    <file>
      <source>../../geomesa-tools/bin/ng</source>
      <outputDirectory>bin</outputDirectory>
      <fileMode>0755</fileMode>
    </file>
    <!-- geomesa-site.xml.template -->
    <file>
      <source>../../geomesa-utils-parent/geomesa-utils/src/main/resources/org/locationtech/geomesa/geomesa-site.xml.template</source>
      <destName>geomesa-site.xml.template</destName>
      <outputDirectory>conf</outputDirectory>
    </file>
    <!-- autocomplete -->
    <file>
      <source>../geomesa-${tools.module}-tools/target/autocomplete.sh</source>
      <destName>autocomplete.sh</destName>
      <outputDirectory>conf</outputDirectory>
    </file>
  </files>
</component>
